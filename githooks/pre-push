#!/bin/bash

TARGET_BRANCHES="(master|develop)"

while read local_ref local_sha1 remote_ref remote_sha1
do
  MESSAGES=`git log --oneline origin/${remote_ref##refs/heads/}..HEAD | awk '{print $2}'`
  if [[ $MESSAGES =~ (WIP|wip|temp|tmp) ]]; then
    echo "ğŸ’ªrebaseã—ã‚ã‚ˆãªï¼"
    exit 1
  fi
  if [[ "${remote_ref##refs/heads/}" =~ $TARGET_BRANCHES ]]; then
    echo "ğŸ˜‡ğŸ˜‡ğŸ˜‡${remote_ref##refs/heads/}ã«pushå¥´ã€œã€œã€œğŸ˜‡ğŸ˜‡ğŸ˜‡"
    afplay $GIT_DIR/hooks/*.mp3
    exit 1
  fi
done
